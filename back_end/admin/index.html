<!DOCTYPE html>
<!--[if IE 9]>         <html class="no-js lt-ie10" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">

    <title>Organica S.R.L. - Cuadro Mando Integral V 2.1</title>

    <meta name="description" content="movilcrm.com crm movil ventas">
    <meta name="author" content="movilcrm.com">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0">

    <!-- Icons -->
    <!-- The following icons can be replaced with your own, they are used by desktop and mobile browsers -->
    <link rel="shortcut icon" href="img/favicon.png">
    <link rel="apple-touch-icon" href="img/icon57.png" sizes="57x57">
    <link rel="apple-touch-icon" href="img/icon72.png" sizes="72x72">
    <link rel="apple-touch-icon" href="img/icon76.png" sizes="76x76">
    <link rel="apple-touch-icon" href="img/icon114.png" sizes="114x114">
    <link rel="apple-touch-icon" href="img/icon120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="img/icon144.png" sizes="144x144">
    <link rel="apple-touch-icon" href="img/icon152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="img/icon180.png" sizes="180x180">
    <!-- END Icons -->

    <!-- Stylesheets -->
    <!-- Bootstrap is included in its original form, unaltered -->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <!-- Related styles of various icon packs and plugins -->
    <link rel="stylesheet" href="css/plugins.css">

    <!-- The main stylesheet of this template. All Bootstrap overwrites are defined in here -->
    <link rel="stylesheet" href="css/main.css">

    <!-- Include a specific file here from css/themes/ folder to alter the default theme of the template -->

    <!-- The themes stylesheet of this template (for using specific theme color in individual elements - must included last) -->
    <link rel="stylesheet" href="css/themes.css">
    <!-- END Stylesheets -->
    <link rel="stylesheet" href="css/map-icons.min.css">
    <link rel="stylesheet" href="css/themes/rm_estilos.css">

    <!-- Modernizr (browser feature detection library) -->
    <script src="js/vendor/modernizr-3.3.1.min.js"></script>
</head>

<body>
    <!-- Page Wrapper -->
    <!-- In the PHP version you can set the following options from inc/config file -->
    <!--
            Available classes:

            'page-loading'      enables page preloader
        -->
    <div id="page-wrapper" class="page-loading">
        <!-- Preloader -->
        <!-- Preloader functionality (initialized in js/app.js) - pageLoading() -->
        <!-- Used only if page preloader enabled from inc/config (PHP version) or the class 'page-loading' is added in #page-wrapper element (HTML version) -->
        <div class="preloader">
            <div class="inner">
                <!-- Animation spinner for all modern browsers -->
                <div class="preloader-spinner themed-background hidden-lt-ie10"></div>

                <!-- Text for IE9 -->
                <h3 class="text-primary visible-lt-ie10"><strong>Loading..</strong></h3>
            </div>
        </div>
        <!-- END Preloader -->

        <!-- Page Container -->
        <!-- In the PHP version you can set the following options from inc/config file -->
        <!--
                Available #page-container classes:

                'sidebar-light'                                 for a light main sidebar (You can add it along with any other class)

                'sidebar-visible-lg-mini'                       main sidebar condensed - Mini Navigation (> 991px)
                'sidebar-visible-lg-full'                       main sidebar full - Full Navigation (> 991px)

                'sidebar-alt-visible-lg'                        alternative sidebar visible by default (> 991px) (You can add it along with any other class)

                'header-fixed-top'                              has to be added only if the class 'navbar-fixed-top' was added on header.navbar
                'header-fixed-bottom'                           has to be added only if the class 'navbar-fixed-bottom' was added on header.navbar

                'fixed-width'                                   for a fixed width layout (can only be used with a static header/main sidebar layout)

                'enable-cookies'                                enables cookies for remembering active color theme when changed from the sidebar links (You can add it along with any other class)
            -->
        <div id="page-container" class="header-fixed-top sidebar-visible-lg-mini">
            <!-- Alternative Sidebar -->
            <div id="sidebar-alt" tabindex="-1" aria-hidden="true">
                <!-- Toggle Alternative Sidebar Button (visible only in static layout) -->
                <a href="javascript:void(0)" id="sidebar-alt-close" onclick="App.sidebar('toggle-sidebar-alt');"><i class="fa fa-times"></i></a>

                <!-- Wrapper for scrolling functionality -->
                <div id="sidebar-scroll-alt">
                    <!-- Sidebar Content -->
                    <div class="sidebar-content">
                        <!-- Sidebar Section -->
                        <div class="sidebar-section">
                            <h2 class="text-light">Header</h2>
                            <p>Section content..</p>
                        </div>
                        <!-- END Sidebar Section -->
                    </div>
                    <!-- END Sidebar Content -->
                </div>
                <!-- END Wrapper for scrolling functionality -->
            </div>
            <!-- END Alternative Sidebar -->

            <!-- Main Sidebar -->
            <div id="sidebar">
                <!-- Sidebar Brand -->
                <div id="sidebar-brand" class="themed-background">
                    <a href="index.html" class="sidebar-title">
                            <i class="fa fa-cube"></i> <span class="sidebar-nav-mini-hide">App<strong>UI</strong></span>
                        </a>
                </div>
                <!-- END Sidebar Brand -->

                <!-- Wrapper for scrolling functionality -->
                <div id="sidebar-scroll">
                    <!-- Sidebar Content -->
                    <div class="sidebar-content">
                        <!-- Sidebar Navigation -->
                        <ul class="sidebar-nav">
                            <li>
                                <a href="index.html" class="active"><i class="gi gi-compass sidebar-nav-icon"></i><span class="sidebar-nav-mini-hide">CUADRO DE MANDO INTEGRAL</span></a>
                            </li>
                            <li class="sidebar-separator">
                                <i class="fa fa-ellipsis-h"></i>
                            </li>
                            <li>
                                <a href="#" class="sidebar-nav-menu"><i class="fa fa-chevron-left sidebar-nav-indicator sidebar-nav-mini-hide"></i><i class="fa fa-cog sidebar-nav-icon"></i><span class="sidebar-nav-mini-hide">Dropdown</span></a>
                                <ul>
                                    <li>
                                        <a href="javascript:void(0)">Link #1</a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)">Link #2</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <!-- END Sidebar Navigation -->

                        <!-- Color Themes -->
                        <!-- Preview a theme on a page functionality can be found in js/app.js - colorThemePreview() -->
                        <div class="sidebar-section sidebar-nav-mini-hide">
                            <div class="sidebar-separator push">
                                <i class="fa fa-ellipsis-h"></i>
                            </div>
                            <ul class="sidebar-themes clearfix">
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-default" data-toggle="tooltip" title="Default" data-theme="default" data-theme-navbar="navbar-inverse" data-theme-sidebar="">
                                            <span class="section-side themed-background-dark-default"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-classy" data-toggle="tooltip" title="Classy" data-theme="css/themes/classy.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="">
                                            <span class="section-side themed-background-dark-classy"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-social" data-toggle="tooltip" title="Social" data-theme="css/themes/social.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="">
                                            <span class="section-side themed-background-dark-social"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-flat" data-toggle="tooltip" title="Flat" data-theme="css/themes/flat.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="">
                                            <span class="section-side themed-background-dark-flat"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-amethyst" data-toggle="tooltip" title="Amethyst" data-theme="css/themes/amethyst.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="">
                                            <span class="section-side themed-background-dark-amethyst"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-creme" data-toggle="tooltip" title="Creme" data-theme="css/themes/creme.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="">
                                            <span class="section-side themed-background-dark-creme"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-passion" data-toggle="tooltip" title="Passion" data-theme="css/themes/passion.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="">
                                            <span class="section-side themed-background-dark-passion"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-default" data-toggle="tooltip" title="Default + Light Sidebar" data-theme="default" data-theme-navbar="navbar-inverse" data-theme-sidebar="sidebar-light">
                                            <span class="section-side"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-classy" data-toggle="tooltip" title="Classy + Light Sidebar" data-theme="css/themes/classy.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="sidebar-light">
                                            <span class="section-side"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-social" data-toggle="tooltip" title="Social + Light Sidebar" data-theme="css/themes/social.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="sidebar-light">
                                            <span class="section-side"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-flat" data-toggle="tooltip" title="Flat + Light Sidebar" data-theme="css/themes/flat.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="sidebar-light">
                                            <span class="section-side"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-amethyst" data-toggle="tooltip" title="Amethyst + Light Sidebar" data-theme="css/themes/amethyst.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="sidebar-light">
                                            <span class="section-side"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-creme" data-toggle="tooltip" title="Creme + Light Sidebar" data-theme="css/themes/creme.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="sidebar-light">
                                            <span class="section-side"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-passion" data-toggle="tooltip" title="Passion + Light Sidebar" data-theme="css/themes/passion.css" data-theme-navbar="navbar-inverse" data-theme-sidebar="sidebar-light">
                                            <span class="section-side"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-default" data-toggle="tooltip" title="Default + Light Header" data-theme="default" data-theme-navbar="navbar-default" data-theme-sidebar="">
                                            <span class="section-header"></span>
                                            <span class="section-side themed-background-dark-default"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-classy" data-toggle="tooltip" title="Classy + Light Header" data-theme="css/themes/classy.css" data-theme-navbar="navbar-default" data-theme-sidebar="">
                                            <span class="section-header"></span>
                                            <span class="section-side themed-background-dark-classy"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-social" data-toggle="tooltip" title="Social + Light Header" data-theme="css/themes/social.css" data-theme-navbar="navbar-default" data-theme-sidebar="">
                                            <span class="section-header"></span>
                                            <span class="section-side themed-background-dark-social"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-flat" data-toggle="tooltip" title="Flat + Light Header" data-theme="css/themes/flat.css" data-theme-navbar="navbar-default" data-theme-sidebar="">
                                            <span class="section-header"></span>
                                            <span class="section-side themed-background-dark-flat"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-amethyst" data-toggle="tooltip" title="Amethyst + Light Header" data-theme="css/themes/amethyst.css" data-theme-navbar="navbar-default" data-theme-sidebar="">
                                            <span class="section-header"></span>
                                            <span class="section-side themed-background-dark-amethyst"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-creme" data-toggle="tooltip" title="Creme + Light Header" data-theme="css/themes/creme.css" data-theme-navbar="navbar-default" data-theme-sidebar="">
                                            <span class="section-header"></span>
                                            <span class="section-side themed-background-dark-creme"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="themed-background-passion" data-toggle="tooltip" title="Passion + Light Header" data-theme="css/themes/passion.css" data-theme-navbar="navbar-default" data-theme-sidebar="">
                                            <span class="section-header"></span>
                                            <span class="section-side themed-background-dark-passion"></span>
                                            <span class="section-content"></span>
                                        </a>
                                </li>
                            </ul>
                        </div>
                        <!-- END Color Themes -->
                    </div>
                    <!-- END Sidebar Content -->
                </div>
                <!-- END Wrapper for scrolling functionality -->

                <!-- END Sidebar Extra Info -->
            </div>
            <!-- END Main Sidebar -->

            <!-- Main Container -->
            <div id="main-container">
                <!-- Header -->
                <!-- In the PHP version you can set the following options from inc/config file -->
                <!--
                        Available header.navbar classes:

                        'navbar-default'            for the default light header
                        'navbar-inverse'            for an alternative dark header

                        'navbar-fixed-top'          for a top fixed header (fixed main sidebar with scroll will be auto initialized, functionality can be found in js/app.js - handleSidebar())
                            'header-fixed-top'      has to be added on #page-container only if the class 'navbar-fixed-top' was added

                        'navbar-fixed-bottom'       for a bottom fixed header (fixed main sidebar with scroll will be auto initialized, functionality can be found in js/app.js - handleSidebar()))
                            'header-fixed-bottom'   has to be added on #page-container only if the class 'navbar-fixed-bottom' was added
                    -->
                <header class="navbar navbar-inverse navbar-fixed-top">
                    <!-- Left Header Navigation -->
                    <ul class="nav navbar-nav-custom">
                        <!-- Main Sidebar Toggle Button -->
                        <li>
                            <a href="javascript:void(0)" onclick="App.sidebar('toggle-sidebar');this.blur();">
                                    <i class="fa fa-ellipsis-v fa-fw animation-fadeInRight" id="sidebar-toggle-mini"></i>
                                    <i class="fa fa-bars fa-fw animation-fadeInRight" id="sidebar-toggle-full"></i>
                                </a>
                        </li>
                        <!-- END Main Sidebar Toggle Button -->

                        <!-- Header Link -->
                        <li class="hidden-xs animation-fadeInQuick">
                            <a href=""><strong>CUADRO DE MANDO INTEGRAL</strong></a>
                        </li>
                        <!-- END Header Link -->
                    </ul>
                    <!-- END Left Header Navigation -->

                    <!-- Right Header Navigation -->
                    <ul class="nav navbar-nav-custom pull-right">
                        <!-- Search Form -->
                        <li>
                            <form action="index.html" method="post" class="navbar-form-custom" role="search">
                                <input type="text" id="top-search" name="top-search" class="form-control" placeholder="Search..">
                            </form>
                        </li>
                        <!-- END Search Form -->

                        <!-- Alternative Sidebar Toggle Button -->
                        <li>
                            <a href="javascript:void(0)" onclick="App.sidebar('toggle-sidebar-alt');this.blur();">
                                    <i class="gi gi-settings"></i>
                                </a>
                        </li>
                        <!-- END Alternative Sidebar Toggle Button -->

                        <!-- User Dropdown -->
                        <li class="dropdown">
                            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">
                                    <img src="img/placeholders/avatars/avatar.jpg" alt="avatar">
                                </a>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <li class="dropdown-header">
                                    <strong>ADMINISTRATOR</strong>
                                </li>
                                <li>
                                    <a href="javascript:void(0)">
                                            <i class="fa fa-inbox fa-fw pull-right"></i>
                                            Link #1
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)">
                                            <i class="fa fa-pencil-square fa-fw pull-right"></i>
                                            Link #2
                                        </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)">
                                            <i class="fa fa-picture-o fa-fw pull-right"></i>
                                            Link #3
                                        </a>
                                </li>
                                <li class="divider">
                                    <li>
                                        <li>
                                            <a href="javascript:void(0)">
                                            <i class="gi gi-settings fa-fw pull-right"></i>
                                            Link #1
                                        </a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0)">
                                            <i class="gi gi-lock fa-fw pull-right"></i>
                                            Link #2
                                        </a>
                                        </li>
                            </ul>
                            </li>
                            <!-- END User Dropdown -->
                    </ul>
                    <!-- END Right Header Navigation -->
                </header>
                <!-- END Header -->

                <!-- Page content -->
                <div id="page-content">
                    <!-- Page Header -->
                    <div class="content-header">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="header-section">
                                    <h1>VENTAS</h1>
                                </div>
                            </div>
                            <div class="col-sm-6 hidden-xs">
                                <div class="header-section">
                                    <ul class="breadcrumb breadcrumb-top">
                                        <li>Ventas</li>
                                        <li><a href="">Mapa</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- END Page Header -->

                    <!-- Example Block -->
                    <div class="block">
                        <!-- Example Title -->
                        <div class="block-title">
                            <div class="block-options pull-right">
                                <a href="javascript:void(0)" class="btn btn-effect-ripple btn-default" data-toggle="tooltip" title="Settings"><i class="fa fa-cog"></i></a>
                                <div class="btn-group">
                                    <a href="javascript:void(0)" class="btn btn-effect-ripple btn-default dropdown-toggle enable-tooltip" data-toggle="dropdown" title="Options">
                                            <i class="fa fa-chevron-down"></i>
                                        </a>
                                    <ul class="dropdown-menu dropdown-menu-right">
                                        <li>
                                            <a href="javascript:void(0)">
                                                    <i class="fa fa-pencil pull-right"></i>
                                                    Edit
                                                </a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0)">
                                                    <i class="fa fa-refresh pull-right"></i>
                                                    Update
                                                </a>
                                        </li>
                                        <li class="divider"></li>
                                        <li>
                                            <a href="javascript:void(0)">
                                                    <i class="fa fa-trash-o fa-fw pull-right"></i>
                                                    Delete
                                                </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <h2>PARAMETROS</h2>

                            <!-- Second Row -->
                            <div class="row">
                                <div class="col-sm-12 col-lg-12">
                                    <div class="widget">
                                        <div class="widget-content border-bottom">
                                            <span class="pull-right text-muted">Tiempo Real</span> Ubicacion de Vendedores en Tiempo Real
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-lg-6">
                                    <!-- Chart Widget -->
                                    <div class="form-group">
                                        <label class="control-label">Actualizar cada:</label>
                                        <select id="timeDropdown" class="form-control">
                  											  <option value="60">1 Minuto</option>
                  											  <option value="120">2 Minutos</option>
                  											  <option value="300">5 Minutos</option>
                  											  <option value="6000">10 Minutos</option>
                  											  <option value="9000">15 Minutos</option>
                  											  <option value="1800">30 Minutos</option>
                  											</select>
                                    </div>
                                    <!-- END Chart Widget -->
                                </div>
                                <div class="col-sm-6 col-lg-6">
                                    <div class="form-group">
                                        <label class="control-label">Usuarios:</label>
                                        <select id="userDropdown" class="form-control user-dropdown">

                                            </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 col-lg-12">
                                    <div style="height: 550px;" id="map-canvas"></div>

                                </div>
                            </div>



                            <!-- END Second Row -->
                        </div>
                        <!-- END Example Title -->

                        <!-- Example Content -->
                        <p>
                          <div class="row">
                            <div class="col-sm-4 col-lg-4">
                              <label>Mostrar Rutas</label>
                              <label class="switch switch-primary"><input id='trailsCheckbox' type="checkbox"><span></span></label>
                            </div>
                            <div class="col-sm-4 col-lg-4">
                              <label>Mostrar Clientes</label>
                              <label class="switch switch-primary"><input id='clientesCheckbox' type="checkbox"><span></span></label>
                            </div>
                            <div class="col-sm-4 col-lg-4">
                              <label>Seguir a Vendedor</label>
                              <label class="switch switch-primary"><input id='vendedorCheckbox' type="checkbox"><span></span></label>
                            </div>
                          </div>
                        </p>
                        <!-- END Example Content -->
                    </div>
                    <!-- END Example Block -->
                    <!-- Example Block -->
                    <div class="block">
                        <!-- Example Title -->
                        <div class="block-title">

                            <h2>GEOCERCAS</h2>

                            <!-- Second Row -->
                            <div class="row">
                                <div class="col-sm-12 col-lg-12">
                                    <div class="widget">
                                        <div class="widget-content border-bottom">
                                            <span class="pull-right text-muted">GeoCercas</span>Editor de GeoCercas
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class='row'>
                                <div class="col-sm-6 col-lg-6">
                                    <div class="form-group">
                                        <label class="control-label">GeoCercas Disponibles:</label>
                                        <select id="geofenceDropdown" class="form-control user-dropdown">

                                            </select>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-lg-6">
                                    <div class="form-group">
                                        <label class="control-label">Usuarios:</label>
                                        <select multiple="multiple" id="salesDropdown" class="form-control user-dropdown">

                                            </select>
                                    </div>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-sm-12 col-lg-12">
                                    <div style="height: 550px;" id="map-canvas-geofence"></div>

                                </div>
                            </div>
                            <!-- END Second Row -->
                        </div>
                        <!-- END Example Title -->

                        <!-- Example Content -->
                        <p>
                            <button id="geofenceGoMyPosition" class="btn btn-effect-ripple btn-primary">My Position</button>
                            <button id="geofenceNewBtn" class="btn btn-effect-ripple btn-primary">New Geofence</button>

                            <button id="geofenceBtn" class="btn btn-effect-ripple btn-primary">Save Geofence</button>
                            <button id="geofenceDeleteBtn" class="btn btn-effect-ripple btn-danger">Delete Geofence</button>

                        </p>
                        <!-- END Example Content -->
                    </div>
                    <!-- END Example Block -->
                </div>
                <!-- END Page Content -->
            </div>
            <!-- END Main Container -->
        </div>
        <!-- END Page Container -->
    </div>
    <!-- END Page Wrapper -->

    <!-- jQuery, Bootstrap, jQuery plugins and Custom JS code -->
    <script src="js/vendor/jquery-2.2.4.min.js"></script>
    <script src="js/vendor/bootstrap.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/app.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=weather,geometry,visualization,places,drawing&key=AIzaSyDZ8bs03HZaGK8HozkoSKZYv48xjKHAF3k"></script>
    <script src="js/map-icons.js"></script>
    <script type='text/javascript'>
        var map;
        var users = [];
        var selectedUser;
        var list = [];
        var clientes;
        var colors = [];
        var map1;
        var geofencesArray = [];
        var geofenceObjects = [];
        var drawingManager;
        var pathsArray = [];
        var zoomLevel1 = 13; //default zoom
        var zoomLevel2 = 13; //default zoom
        var newFlag = false;
        var bounds = new google.maps.LatLngBounds();
    	$.ajaxSetup({ cache: false });
        $(document).on('ready', function() {

          $('#userDropdown').on('change', function() {
            selectedUser = $(this).val();
            initialize();
          });
    	  $('#trailsCheckbox').on('change',function(){
    		    initialize();
    	  });

        $('#clientesCheckbox').on('change',function(){
    		    initialize();
    	  });

        $('#vendedorCheckbox').on('change',function(){
    		    initialize();
    	  });

          $('#salesDropdown').on('change', function() {
            if (!$('#geofenceDropdown').val() && !newFlag)
              initializeDrawingMap();
          });
          $('#geofenceNewBtn').on('click', function() {
    			$('#salesDropdown').val('').trigger('change.select2');
    			$('#geofenceDropdown').val('');
    			newFlag = true;
          });
          $('#geofenceGoMyPosition').on('click', function() {
            MyPosition();
            newFlag = true;
          });


          $('#geofenceBtn').on('click', function() {
            var users = $('#salesDropdown').val();


            if (!newFlag) {
              var data = {
                "geofence": geofencesArray[$('#geofenceDropdown').val()],
                "users_id": users
              };
              console.log(data);
              sendGeofenceData(data);
            } else {
              if ($('#salesDropdown').val() && pathsArray) {
                var name = prompt("Please enter name for geofence", "");
                if (name) {
                  var data = {
                    'name': name,
                    "users_id": users,
                    "pathsArray": pathsArray
                  };
                  console.log(data);
                  sendGeofenceData(data);
                  newFlag = false;
                  pathsArray = [];
                }
              }
            }
          });
          $('#geofenceDeleteBtn').on('click', function() {
            if ($('#geofenceDropdown').val()) {
    			var r = confirm("Are you sure you want to delete the selected geofence?");
                if(r == true)
    				deleteGeofenceData($('#geofenceDropdown').val());
            }
          });
          $('#geofenceDropdown').on('change', function() {
    			var value = $(this).val();
            if (value) {
              newFlag = false;
    		  var geo = geofencesArray[value];
              for (var i = 0; i < geofenceObjects.length; i++) {
                geofenceObjects[i].setMap(null);
              }
              drawShape(geo, true);
              var _users = [];


    		  for (var k = 0; k < geo.users.length; k++) {
    			// $("#salesDropdown option[value='" + geo.users[k].id + "']").prop("selected", true);
    			_users.push(geo.users[k].id);
    		  }


              //console.log(_users);
              $('#salesDropdown').val(_users); //.trigger('change.select2');;
              //$('#salesDropdown').prop('disabled',true);
              $('#salesDropdown').trigger('change.select2');
            } else {
              for (var j = 0; j < geofencesArray.length; j++) {
                if (geofencesArray[j])
                  drawShape(geofencesArray[j]);
              }
              $('#salesDropdown').val('');
              //$('#salesDropdown').prop('disabled',false);
              $('#salesDropdown').trigger('change.select2');;
              clearSelection();
            }
          });
          loadSalesman();
        });

        function MyPosition() {
          if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
              initialLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
              map1.setCenter(initialLocation);
            }, function error(msg) {
              alert('Please enable your GPS position future.');

            }, {
              maximumAge: 600000,
              timeout: 5000,
              enableHighAccuracy: true
            });

          } else {
            alert("Geolocation API is not supported in your browser.");
          }
        }


        function deleteGeofenceData(id) {
          $.ajax({
            url: "https://cloud.movilcrm.com/organica/back_end/rmXMLRPC_geolocalizacion.php?task=rmRegistrarGeolocalizacionGeocercaDelete&geocerca_id=" + id,
            // The name of the callback parameter, as specified by the YQL service
            jsonp: "callback",
            // Tell jQuery we're expecting JSONP
            dataType: "jsonp",
            // Work with the response
            success: function(response) {
              //console.log(response.rmListaVendedores);
              $('#geofenceDropdown').html('');
    		  $('#salesDropdown').html('').trigger('change.select2');
              window.location.reload();
            }
          });
        }

        function loadSalesman() {
          $.ajax({
            url: "https://cloud.movilcrm.com/organica/back_end/rmXMLRPC_login.php?task=rmListaVendedores",
            // The name of the callback parameter, as specified by the YQL service
            jsonp: "callback",
            // Tell jQuery we're expecting JSONP
            dataType: "jsonp",
            // Work with the response
            success: function(response) {
              //console.log(response.rmListaVendedores);
              $('#salesDropdown').html('');
              for (var i = 0; i < response.rmListaVendedores.length; i++) {
                var salesman = response.rmListaVendedores[i];
                $('#salesDropdown').append($("<option value='" + salesman.id + "'>" + salesman.login + "</option>"));
              }
              $('#salesDropdown').select2();
            }
          });
        }

        function sendGeofenceData(data) {
          var postData = {};
          if (data.geofence) {
            postData.id = data.geofence.id;
            postData.name = data.geofence.name;
            var path = selectedShape.getPath();
            var pathsArray = [];
            for (var i = 0; i < path.length; i++) {
              pathsArray.push({
                'rm_latitude': path.getAt(i).lat(),
                'rm_longitude': path.getAt(i).lng()
              });
            }
            console.log(pathsArray);
            postData.locations = pathsArray;
          } else {
            postData.name = data.name;
            postData.locations = data.pathsArray;
          }
          postData.user_id = data.users_id;

          $.ajax({
            url: "https://cloud.movilcrm.com/organica/back_end/rmXMLRPC_geolocalizacion.php?task=rmRegistrarGeolocalizacionGeocerca",
            // The name of the callback parameter, as specified by the YQL service
            method: "POST",
            // Tell jQuery we're expecting JSONP
            //dataType: "jsonp",

            data: postData,
            // Work with the response
            success: function(response) {
              console.log(respose);
    		  window.location.reload();
            }
          }).done(function(data) {
            window.location.reload();
          });
        }

        function getColor(userId) {
          for (var i = 0; i < colors.length; i++) {
            if (colors[i].userId == userId)
              return colors[i];
          }
        }

        function addColor(userId, color) {
          colors.push({
            'userId': userId,
            'color': color
          });
        }

        function loadMapData() {
          $.ajax({
            url: "https://cloud.movilcrm.com/organica/back_end/rmXMLRPC_geolocalizacion.php?task=rmListaGeolocalizacionLive",
            // The name of the callback parameter, as specified by the YQL service
            jsonp: "callback",
            // Tell jQuery we're expecting JSONP
            dataType: "jsonp",
            // Work with the response
            success: function(response) {
              list = response.rmListaGeolocalizacionLive;
              if (list) {
                window.list = list;
                polylines = [];
                $('#resultsMap').html('');
                $('#userDropdown').html('');
                $('#userDropdown').append($('<option value="">Seleccionar usuario</option>'));

                var userId = list[0].user_id;
                var loginName = list[0].login;
                //users.push({'id':list[0].user_id,'login':list[0].login});
                var selected = "";
                if (list[0].user_id == selectedUser)
                  selected = "selected=selected";
                $('#userDropdown').append($('<option ' + selected + ' value="' + list[0].user_id + '">' + list[0].login + '</option>'));

                // $('#userSelector').append('<option value="'+list[0].user_id+'">'+list[0].login+'</option>');
                var latArray = [];
                for (var i = 0; i < list.length; i++) {
                  var option = list[i];
                  if (userId != option.user_id) {
                    drawLine(latArray, loginName, userId);
                    userId = option.user_id;
                    loginName = option.login;
                    users.push({
                      'id': userId,
                      'login': loginName
                    });
                    var selected = "";
                    if (userId == selectedUser)
                      selected = "selected=selected";
                    $('#userDropdown').append($('<option ' + selected + ' value="' + userId + '">' + loginName + '</option>'));

                    latArray = [];
                  } else {
                    if (option.rm_longitude != "72.3488721" && option.rm_latitude != "30.045246199999998") {
                      latArray.push({
                        lat: parseFloat(option.rm_latitude),
                        lng: parseFloat(option.rm_longitude)
                      });
                    }
                  }
                }
                console.log("users:" + JSON.stringify(users));
                drawLine(latArray, loginName, userId);
              }
            }
          });
        }

        function addMarker(position, color) {
          console.log(color);
          var marker1 = new mapIcons.Marker({
            map: map,
            position: position,
            icon: {
              path: mapIcons.shapes.MAP_PIN,
              fillColor: color,
              fillOpacity: 1,
              strokeColor: '',
              strokeWeight: 0
            },
            map_icon_label: '<span class="map-icon map-icon-male"></span>'
          });
        }

        function drawLine(points, name, userId) {
          //console.log(points);
          if (selectedUser && selectedUser != userId) {
            return false;
          }
          var colorObj = getColor(userId);
          if (!colorObj) {
            var color = '#' + Math.round((0x1000000 + 0xffffff * Math.random())).toString(16).slice(1);
            addColor(userId, color);
          } else {
            color = colorObj.color;
          }
      	  if($('#trailsCheckbox').is(':checked')) {
      		  var line = new google.maps.Polyline({
      			path: points,
      			strokeColor: color,
      			strokeOpacity: 1.0,
      			strokeWeight: 2,
      			map: map,
      			geodesic: true,
      		  });
      		  polylines.push(line);
      		  line.setMap(map);
      		}

          // console.log(JSON.stringify(points));
          if (points.length) {
            var marker = new google.maps.LatLng(points[0].lat, points[0].lng);
            //Zoom y centrado automatico para cada el usuario seleccionado mapa vendedores
            if($('#vendedorCheckbox').is(':checked')) {
              map.setCenter(marker);
              map.setZoom(17);
            }
            addMarker(marker, color);
          }

        }

        var selectedShape;
        var all_overlays = [];

        function deleteSelectedShape() {
          if (selectedShape) {
            selectedShape.setMap(null);
          }
        }

        function clearSelection() {
          if (selectedShape) {
            selectedShape.setEditable(false);
            selectedShape = null;
          }
        }

        function deleteAllShape() {
          for (var i = 0; i < all_overlays.length; i++) {
            all_overlays[i].overlay.setMap(null);
          }
          all_overlays = [];
        }

        function setSelection(shape) {
          clearSelection();
          selectedShape = shape;
          shape.setEditable(true);
          console.log(shape.getPath());
          // google.maps.event.addListener(selectedShape.getPath(), 'insert_at', getPolygonCoords(shape));
          // google.maps.event.addListener(selectedShape.getPath(), 'set_at', getPolygonCoords(shape));
        }

        function initializeDrawingMap() {
          $('#map-canvas-geofence').html('');
          $("#salesDropdown").val('').trigger('change.select2');;
          $("#geofenceDropdown").val('')
          drawingManager = new google.maps.drawing.DrawingManager({
            drawingMode: google.maps.drawing.OverlayType.POLYGON,
            drawingControl: true,
            drawingControlOptions: {
              position: google.maps.ControlPosition.TOP_CENTER,
              drawingModes: [
                google.maps.drawing.OverlayType.POLYGON,
               ]
            },
            polygonOptions: {
              clickable: true,
              draggable: true,
              editable: true,
              fillColor: '#ffff00',
              fillOpacity: 1,

            }
          });
          var lat = -17.3940469;
          var lng = -66.233916;
          var bounds = new google.maps.LatLngBounds();

          if (localStorage.getItem("zoomLevel2")) {
            zoom = parseInt(localStorage.getItem("zoomLevel2"));
          } else {
            zoom = parseInt(zoomLevel2);
          }

          console.log("zoom2: " + zoom);

          var mapOptions = {
            center: new google.maps.LatLng(lat, lng),
            zoom: zoom,
          };


          map1 = new google.maps.Map(document.getElementById('map-canvas-geofence'), mapOptions);
          drawingManager.setMap(map1);
          drawingManager.setDrawingMode(null);
          var centerControlDiv = document.createElement('div');
          var centerControl = new CenterControl(centerControlDiv, map1);

          centerControlDiv.index = 1;
          map1.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(centerControlDiv);

          google.maps.event.addDomListener(drawingManager, 'polygoncomplete', function(polygon) {
            path = polygon.getPath();
            for (var i = 0; i < path.length; i++) {
              pathsArray.push({
                'rm_latitude': path.getAt(i).lat(),
                'rm_longitude': path.getAt(i).lng()
              });
            }
            console.log(pathsArray);
          });

          // mylat = mGoogleMap.getCameraPosition().target.latitude;
          // mylong = mGoogleMap.getCameraPosition().target.longitude;

          // on zoom change
          google.maps.event.addListener(map1, 'zoom_changed', function() {
              zoomLevel2 = map1.getZoom();
              localStorage.setItem("zoomLevel2", zoomLevel2);
              console.log("zoomLevel2: " + localStorage.getItem("zoomLevel2"));
          });

          setTimeout(function() {
            loadGeoFences(map1);
          }, 10);
        }

        function CenterControl(controlDiv, map) {

          // Set CSS for the control border.
          var controlUI = document.createElement('div');
          controlUI.style.backgroundColor = '#fff';
          controlUI.style.border = '2px solid #fff';
          controlUI.style.borderRadius = '3px';
          controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
          controlUI.style.cursor = 'pointer';
          controlUI.style.marginBottom = '22px';
          controlUI.style.textAlign = 'center';
          controlUI.title = 'Select to delete the shape';
          controlDiv.appendChild(controlUI);

          // Set CSS for the control interior.
          var controlText = document.createElement('div');
          controlText.style.color = 'rgb(25,25,25)';
          controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
          controlText.style.fontSize = '16px';
          controlText.style.lineHeight = '38px';
          controlText.style.paddingLeft = '5px';
          controlText.style.paddingRight = '5px';
          controlText.innerHTML = 'Delete Selected Area';
          controlUI.appendChild(controlText);

          // Setup the click event listeners: simply set the map to Chicago.
          controlUI.addEventListener('click', function() {
            deleteSelectedShape();
          });
        }

        function loadGeoFences(geofenceMap) {
          var users = $('#userDropdown').val();
          var url = "https://cloud.movilcrm.com/organica/back_end/rmXMLRPC_geolocalizacion.php?task=rmListaGeolocalizacionGeocerca&v=" + Date.now();

          if (users) {
            url = "https://cloud.movilcrm.com/organica/back_end/rmXMLRPC_geolocalizacion.php?task=rmListaGeolocalizacionGeocerca&user_id=" + users + "&v=" + Date.now();
          }
    	  console.log(url);
          $.ajax({
            url: url,
            // The name of the callback parameter, as specified by the YQL service
            jsonp: "callback",
            // Tell jQuery we're expecting JSONP
            dataType: "jsonp",
    	      cache:false,
            // Work with the response
            success: function(response) {
              var geofences = response.rmListaGeolocalizacionGeocerca;
              // console.log(geofences);
              geofenceObjects = [];
              for (var i = 0; geofences && i < geofences.length; i++) {
                var geofence = geofences[i].geofence ? geofences[i].geofence : geofences[i];

                if (!users) {
                  geofencesArray[geofence.id] = geofence;
                }
                drawShape(geofence,0,geofenceMap);
              }
              if (!users) {
                $('#geofenceDropdown').html();
                console.log(geofencesArray);
                $('#geofenceDropdown').append($("<option value='' >Select Geofence</option>"));
                for (var j = 0; j < geofencesArray.length; j++) {
                  if (geofencesArray[j])
                    $('#geofenceDropdown').append($("<option value='" + geofencesArray[j].id + "' >" + geofencesArray[j].name + "</option>"));
                }
              }
              if (bounds.length)
                map1.fitBounds(bounds);
            }
          });
        }

        function mapInitialize() {
          initializeDrawingMap();
          initialize();
        }

        function drawShape(geofence, selectFlag,geofenceMap) {
          var _locations = geofence.locations;
          var locations = [];
          for (var j = 0; j < _locations.length; j++) {
            var point = new google.maps.LatLng(parseFloat(_locations[j].rm_latitude), parseFloat(_locations[j].rm_longitude));
            locations.push(point);
            bounds.extend(point);
          }
          var color = '#' + Math.round((0x1000000 + 0xffffff * Math.random())).toString(16).slice(1);

          var bermudaTriangle = new google.maps.Polygon({
            paths: locations,
            strokeColor: color,
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: color,
            fillOpacity: 0.35,
            editable: true
          });
          //console.log(map1);
          bermudaTriangle.setMap(geofenceMap);
          geofenceObjects.push(bermudaTriangle);
          if (selectFlag)
            setSelection(bermudaTriangle);

        }

        function initialize() {
          //console.log('function');
          $('#map-canvas').html('<div class="preloader-spinner themed-background hidden-lt-ie10"></div>');

          // Geocercas
          drawingManager = new google.maps.drawing.DrawingManager({
            drawingMode: google.maps.drawing.OverlayType.POLYGON,
            drawingControl: true,
            drawingControlOptions: {
              position: google.maps.ControlPosition.TOP_CENTER,
              drawingModes: [
                google.maps.drawing.OverlayType.POLYGON,
              ]
            },
            polygonOptions: {
              clickable: true,
              draggable: true,
              editable: true,
              fillColor: '#ffff00',
              fillOpacity: 1,

            }
          });

          var lat = '-17.3940469';
          var lng = '-66.233916';
          var bounds = new google.maps.LatLngBounds();

          if (localStorage.getItem("zoomLevel1")) {
            zoom = parseInt(localStorage.getItem("zoomLevel1"));
          } else {
            zoom = parseInt(zoomLevel1);
          }

          console.log("zoom1: " + zoom);

          // Geocercas
          var mapOptions = {
            center: new google.maps.LatLng(lat, lng),
            zoom: zoom,
          };
          map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
          drawingManager.setMap(map);
          drawingManager.setDrawingMode(null);
          var centerControlDiv = document.createElement('div');
          var centerControl = new CenterControl(centerControlDiv, map);
          centerControlDiv.index = 1;
          map.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(centerControlDiv);

          google.maps.event.addDomListener(drawingManager, 'polygoncomplete', function(polygon) {
            path = polygon.getPath();
            for (var i = 0; i < path.length; i++) {
              pathsArray.push({
                'rm_latitude': path.getAt(i).lat(),
                'rm_longitude': path.getAt(i).lng()
              });
            }
            console.log(pathsArray);
          });

          // on zoom change
          google.maps.event.addListener(map, 'zoom_changed', function() {
              zoomLevel1 = map.getZoom();
              localStorage.setItem("zoomLevel1", zoomLevel1);
              console.log("zoomLevel1: " + localStorage.getItem("zoomLevel1"));
          });

          setTimeout(function() {
            loadGeoFences(map);
          }, 10);

          // rutas Vendedores
          google.maps.event.trigger(map, 'resize');
          loadMapData();
          var time = parseInt($('#timeDropdown').val(), 10) * 1000;

          // Cargar clientes
          if($('#clientesCheckbox').is(':checked')) {
            var users = $('#userDropdown').val();
            cargarDatosClientesVendedor(map,users);
          }

          setTimeout(function() {
            initialize();
          }, time);
        }

        if ($('#map-canvas').length != 0) {
          google.maps.event.addDomListener(window, 'load', mapInitialize);
          google.maps.event.addDomListener(document.getElementById("map-canvas-geofence"), 'ready', function() {
            alert(1);
            drawingManager.setMap(map1)
          });

        }

        function cargarDatosClientesVendedor(map,usuario) {
          var url = "https://cloud.movilcrm.com/organica/back_end/rmXMLRPC_clientes.php?task=rmListaClientes&res_user_id=" + usuario;

          $.ajax({

            url: url,
            // The name of the callback parameter, as specified by the YQL service
            jsonp: "callback",
            // Tell jQuery we're expecting JSONP
            dataType: "jsonp",
            // Work with the response
            success: function(response) {
              list = response.rmListaClientes;
              if (list) {
                window.list = list;
                // console.log("Cargar la lista de clientes: " + JSON.stringify(list));
                var locations = list;
                // clientes = list;
                for (var i = 0; i < locations.length; i++) {
                  var marker;

                  if (locations[i].total_ventas > 0) {
                    var image = './img/icons/marker-green.png';
                  } else if ( locations[i].totalVentasApp > 0) {
                    var image = './img/icons/marker-yellow.png';
                  } else {
                    var image = './img/icons/marker-red.png';
                  }

                  var infowindow = new google.maps.InfoWindow();

                  marker = new google.maps.Marker({
                    position: new google.maps.LatLng(locations[i].rm_latitude, locations[i].rm_longitude),
                    map: map,
                    icon: image,
                  });

                  google.maps.event.addListener(marker, 'click', (function(marker, i) {
                      return function() {
                          infowindow.setContent(locations[i].name);
                          infowindow.open(map, marker);
                          map.setCenter(this.getPosition());
                      }
                  })(marker, i));

                }
              }
            }
            // }
          });
        }

    </script>
</body>

</html>
